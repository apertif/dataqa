
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Module: qa_continuum &#8212; DataQA 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Script: run_continuum_validation" href="continuum_run_continuum_validation.html" />
    <link rel="prev" title="Continuum and Mosaic QA" href="continuum.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="continuum_run_continuum_validation.html" title="Script: run_continuum_validation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="continuum.html" title="Continuum and Mosaic QA"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DataQA 1.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="continuum.html" accesskey="U">Continuum and Mosaic QA</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module: qa_continuum</a><ul>
<li><a class="reference internal" href="#module-continuum.qa_continuum">Reference</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="continuum.html"
                        title="previous chapter">Continuum and Mosaic QA</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="continuum_run_continuum_validation.html"
                        title="next chapter">Script: run_continuum_validation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/continuum_qa_continuum.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-qa-continuum">
<h1>Module: qa_continuum<a class="headerlink" href="#module-qa-continuum" title="Permalink to this headline">¶</a></h1>
<p>This module contains functionality to create continuum image plots and
run the continuum validation tool including source finding.</p>
<div class="section" id="module-continuum.qa_continuum">
<span id="reference"></span><h2>Reference<a class="headerlink" href="#module-continuum.qa_continuum" title="Permalink to this headline">¶</a></h2>
<p>This script contains function to run pybdsf for the continuum QA.</p>
<dl class="function">
<dt id="continuum.qa_continuum.get_continuum_fits_images">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">get_continuum_fits_images</code><span class="sig-paren">(</span><em>data_basedir_list</em>, <em>qa_validation_dir</em>, <em>save_table=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#get_continuum_fits_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.get_continuum_fits_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that gets the list of existing continuum fits images for each beam.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>The function goes through the four data directories and collects all fits image
it finds for the beams. It accounts for missing fits images.
It always looks for 40 beams no matter on which happili node.
Therefore, the output table contains the two columns “beam_exists”
and “fits_image_exists”. The first one will be True if a beam is
available on a particular node and the last one if a continuum image
exists. “fits_image_exists” can be False if “beam_exists” is True if
no continuum image was found for an existing beam.</dd>
<dt>Parameter:</dt>
<dd><dl class="first last docutils">
<dt>data_basedir_list <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>The data directories on happili</dd>
<dt>qa_validation_dir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Directory where the QA is stored</dd>
<dt>save_table <span class="classifier-delimiter">:</span> <span class="classifier">bool (default True)</span></dt>
<dd>Save the list of fits files to the QA directory</dd>
</dl>
</dd>
<dt>Return:</dt>
<dd><dl class="first last docutils">
<dt>fits_file_table <span class="classifier-delimiter">:</span> <span class="classifier">Astropy Table</span></dt>
<dd>The beams and path to the continuum image</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.get_image_from_fits">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">get_image_from_fits</code><span class="sig-paren">(</span><em>fits_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#get_image_from_fits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.get_image_from_fits" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to get the image from a fits file</p>
<dl class="docutils">
<dt>Parameter:</dt>
<dd><dl class="first last docutils">
<dt>fits_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>File name of the image fits file</dd>
</dl>
</dd>
<dt>Return:</dt>
<dd><dl class="first last docutils">
<dt>img <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd>The image from the fits file of an array</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.qa_check_image_gaussianity">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">qa_check_image_gaussianity</code><span class="sig-paren">(</span><em>fits_file</em>, <em>alpha=0.01</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#qa_check_image_gaussianity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.qa_check_image_gaussianity" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an image has gaussian distribution</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>Function was taken from apercal.subs.qa.checkimagegaussianity</dd>
<dt>Parameter:</dt>
<dd><dl class="first last docutils">
<dt>fits_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The name of the fits image to process</dd>
<dt>alpha <span class="classifier-delimiter">:</span> <span class="classifier">float (default 1e-2)</span></dt>
<dd>Parameter to judge the gaussianity, default taken from apercal conifg</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>True if image is ok, False otherwise</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.qa_continuum_run_validation">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">qa_continuum_run_validation</code><span class="sig-paren">(</span><em>data_basedir_list</em>, <em>qa_validation_dir</em>, <em>overwrite=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#qa_continuum_run_validation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.qa_continuum_run_validation" title="Permalink to this definition">¶</a></dt>
<dd><p>This function runs pybdsf on the continuum image of each beam</p>
<p>This function will create a new directory for each beam. In this sub-directory
the fits image and the pybdsf output will be saved.
In the end the function will provide information on how many directories, beams,
or pybdsf runs failed.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>The function will always overwrite existing files.</dd>
<dt>Parameter:</dt>
<dd><dl class="first last docutils">
<dt>data_basedir_list <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>List of data directories on the happili node</dd>
<dt>qa_validation_dir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The directory of the QA where the output will be saved.
Most likely this is /home/&lt;user&gt;/qa_science_demo_2019/continuum/</dd>
</dl>
</dd>
<dt>Return:</dt>
<dd><dl class="first last docutils">
<dt>run_pybdsf_status <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Status of how well this function performed</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.qa_get_image_dr">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">qa_get_image_dr</code><span class="sig-paren">(</span><em>fits_file</em>, <em>rms</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#qa_get_image_dr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.qa_get_image_dr" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to determine the image dynamic range</p>
<dl class="docutils">
<dt>Note:</dt>
<dd><dl class="first last docutils">
<dt>fits_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The name of the fits image to process</dd>
<dt>rms <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The noise level of the image</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>image_dr <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The image dynamic range</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.qa_get_image_noise_dr_gaussianity">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">qa_get_image_noise_dr_gaussianity</code><span class="sig-paren">(</span><em>fits_file</em>, <em>qa_validation_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#qa_get_image_noise_dr_gaussianity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.qa_get_image_noise_dr_gaussianity" title="Permalink to this definition">¶</a></dt>
<dd><p>This functions determines additional image QA informaiton.</p>
<p>NOT FINISHED</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>The function determines the image noise, the local dynamic range and gaussianity of an image</dd>
<dt>Parameter:</dt>
<dd><dl class="first last docutils">
<dt>fits_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The file name of the fits image to process</dd>
<dt>qa_validation_dir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The directory of the continuum or mosaic QA where the output should be saved to</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.qa_get_source_cat_dr">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">qa_get_source_cat_dr</code><span class="sig-paren">(</span><em>fits_file</em>, <em>rms</em>, <em>qa_validation_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#qa_get_source_cat_dr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.qa_get_source_cat_dr" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to determine the dynamic range in the source catalog</p>
<p>NOT FINISHED</p>
<dl class="docutils">
<dt>Note:</dt>
<dd><dl class="first last docutils">
<dt>fits_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The name of the fits image to process</dd>
<dt>rms <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The noise level of the image</dd>
<dt>qa_validation_dir <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The path to the directory where the QA (and pybdsft output) is stored</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>source_cat_dr <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The dynamic range in the source catalogue</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="continuum.qa_continuum.qa_plot_pybdsf_images">
<code class="descclassname">continuum.qa_continuum.</code><code class="descname">qa_plot_pybdsf_images</code><span class="sig-paren">(</span><em>fits_file_list</em>, <em>plot_name_list</em>, <em>plot_type_list</em>, <em>plot_format='png'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/continuum/qa_continuum.html#qa_plot_pybdsf_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#continuum.qa_continuum.qa_plot_pybdsf_images" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates quick plots of the diagnostic fits files</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>By default the images are created in png format with 400dpi, but it
is possible to choose pdf</dd>
<dt>Parameter:</dt>
<dd><dl class="first last docutils">
<dt>fits_file_list <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>A list of strings with the file names of the fits files</dd>
<dt>plot_name_list <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>A list of strings with the names of the plots to save</dd>
<dt>plot_type_list <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>List of the types of plots which controls some plot settings.</dd>
<dt>plot_format <span class="classifier-delimiter">:</span> <span class="classifier">str (default png)</span></dt>
<dd>The format of the plot for matplotlib</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="continuum_run_continuum_validation.html" title="Script: run_continuum_validation"
             >next</a> |</li>
        <li class="right" >
          <a href="continuum.html" title="Continuum and Mosaic QA"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DataQA 1.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="continuum.html" >Continuum and Mosaic QA</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Apertif Imaging Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>